import { r as resolveComponent, c as createElementBlock, a as createBaseVNode, b as createVNode, F as Fragment, e as createStaticVNode, d as createTextVNode, o as openBlock } from "./app.f1ef7422.js";
import { _ as _export_sfc } from "./plugin-vue_export-helper.5a098b48.js";
const _sfc_main = {};
const _hoisted_1 = /* @__PURE__ */ createStaticVNode('<h1 id="setup" tabindex="-1"><a class="header-anchor" href="#setup" aria-hidden="true">#</a> Setup</h1><h2 id="\u521B\u5EFA\u548C\u8BBE\u7F6E\u7EC4\u4EF6\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u548C\u8BBE\u7F6E\u7EC4\u4EF6\u5B9E\u4F8B" aria-hidden="true">#</a> \u521B\u5EFA\u548C\u8BBE\u7F6E\u7EC4\u4EF6\u5B9E\u4F8B</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">mountComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token parameter">initialVNode<span class="token punctuation">,</span>\n  container<span class="token punctuation">,</span>\n  anchor<span class="token punctuation">,</span>\n  parentComponent<span class="token punctuation">,</span>\n  parentSuspense<span class="token punctuation">,</span>\n  isSVG<span class="token punctuation">,</span>\n  optimized</span>\n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token comment">// \u521B\u5EFA\u7EC4\u4EF6\u5B9E\u4F8B</span>\n  <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span>initialVNode<span class="token punctuation">.</span>component <span class="token operator">=</span> <span class="token function">createComponentInstance</span><span class="token punctuation">(</span>\n    initialVNode<span class="token punctuation">,</span>\n    parentComponent<span class="token punctuation">,</span>\n    parentSuspense\n  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// \u8BBE\u7F6E\u7EC4\u4EF6\u5B9E\u4F8B</span>\n  <span class="token function">setupComponent</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// \u8BBE\u7F6E\u5E76\u8FD0\u884C\u5E26\u526F\u4F5C\u7528\u7684\u6E32\u67D3\u51FD\u6570</span>\n  <span class="token function">setupRenderEffect</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> initialVNode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">,</span> parentSuspense<span class="token punctuation">,</span> isSVG<span class="token punctuation">,</span> optimized<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre></div><h2 id="\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u8BBE\u7F6E\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u8BBE\u7F6E\u6D41\u7A0B" aria-hidden="true">#</a> \u7EC4\u4EF6\u5B9E\u4F8B\u7684\u8BBE\u7F6E\u6D41\u7A0B</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">setupComponent</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> isSSR <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> props<span class="token punctuation">,</span> children<span class="token punctuation">,</span> shapeFlag <span class="token punctuation">}</span> <span class="token operator">=</span> instance<span class="token punctuation">.</span>vnode<span class="token punctuation">;</span>\n  <span class="token comment">// \u5224\u65AD\u662F\u5426\u662F\u4E00\u4E2A\u6709\u72B6\u6001\u7684\u7EC4\u4EF6</span>\n  <span class="token keyword">const</span> isStateful <span class="token operator">=</span> shapeFlag <span class="token operator">&amp;</span> <span class="token number">4</span><span class="token punctuation">;</span>\n  <span class="token comment">// \u521D\u59CB\u5316 props</span>\n  <span class="token function">initProps</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> props<span class="token punctuation">,</span> isStateful<span class="token punctuation">,</span> isSSR<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// \u521D\u59CB\u5316 \u63D2\u69FD</span>\n  <span class="token function">initSlots</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> children<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// \u8BBE\u7F6E\u6709\u72B6\u6001\u7684\u7EC4\u4EF6\u5B9E\u4F8B</span>\n  <span class="token keyword">const</span> setupResult <span class="token operator">=</span> isStateful <span class="token operator">?</span> <span class="token function">setupStatefulComponent</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> isSSR<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> setupResult<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p>\u6211\u4EEC\u4ECE\u7EC4\u4EF6 vnode \u4E2D\u83B7\u53D6\u4E86 props\u3001children\u3001shapeFlag \u7B49\u5C5E\u6027\uFF0C\u7136\u540E\u5206\u522B\u5BF9 props \u548C\u63D2\u69FD\u8FDB\u884C\u521D\u59CB\u5316\u3002</p><h2 id="setupstatefulcomponent" tabindex="-1"><a class="header-anchor" href="#setupstatefulcomponent" aria-hidden="true">#</a> setupStatefulComponent</h2><p>\u5B83\u4E3B\u8981\u505A\u4E86\u4E09\u4EF6\u4E8B\uFF1A\u521B\u5EFA\u6E32\u67D3\u4E0A\u4E0B\u6587\u4EE3\u7406\u3001\u5224\u65AD\u5904\u7406 setup \u51FD\u6570\u548C\u5B8C\u6210\u7EC4\u4EF6\u5B9E\u4F8B\u8BBE\u7F6E\u3002</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">setupStatefulComponent</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> isSSR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> Component <span class="token operator">=</span> instance<span class="token punctuation">.</span>type<span class="token punctuation">;</span>\n  <span class="token comment">// \u521B\u5EFA\u6E32\u67D3\u4EE3\u7406\u7684\u5C5E\u6027\u8BBF\u95EE\u7F13\u5B58</span>\n  instance<span class="token punctuation">.</span>accessCache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token comment">// \u521B\u5EFA\u6E32\u67D3\u4E0A\u4E0B\u6587\u4EE3\u7406</span>\n  instance<span class="token punctuation">.</span>proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>ctx<span class="token punctuation">,</span> PublicInstanceProxyHandlers<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// \u5224\u65AD\u5904\u7406 setup \u51FD\u6570</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> setup <span class="token punctuation">}</span> <span class="token operator">=</span> Component<span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>setup<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// \u5982\u679C setup \u51FD\u6570\u5E26\u53C2\u6570\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A setupContext</span>\n    <span class="token keyword">const</span> setupContext <span class="token operator">=</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>setupContext <span class="token operator">=</span>\n      setup<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token function">createSetupContext</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// \u6267\u884C setup \u51FD\u6570\uFF0C\u83B7\u53D6\u7ED3\u679C</span>\n    <span class="token keyword">const</span> setupResult <span class="token operator">=</span> <span class="token function">callWithErrorHandling</span><span class="token punctuation">(</span>setup<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token comment">/* SETUP_FUNCTION */</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>\n      instance<span class="token punctuation">.</span>props<span class="token punctuation">,</span>\n      setupContext<span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// \u5904\u7406 setup \u6267\u884C\u7ED3\u679C</span>\n    <span class="token function">handleSetupResult</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> setupResult<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    <span class="token comment">// \u5B8C\u6210\u7EC4\u4EF6\u5B9E\u4F8B\u8BBE\u7F6E</span>\n    <span class="token function">finishComponentSetup</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="\u521B\u5EFA\u6E32\u67D3\u4E0A\u4E0B\u6587\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u6E32\u67D3\u4E0A\u4E0B\u6587\u4EE3\u7406" aria-hidden="true">#</a> \u521B\u5EFA\u6E32\u67D3\u4E0A\u4E0B\u6587\u4EE3\u7406</h2><p>\u5230\u4E86 Vue.js 3.0\uFF0C\u4E3A\u4E86\u65B9\u4FBF\u7EF4\u62A4\uFF0C\u6211\u4EEC\u628A\u7EC4\u4EF6\u4E2D\u4E0D\u540C\u72B6\u6001\u7684\u6570\u636E\u5B58\u50A8\u5230\u4E0D\u540C\u7684\u5C5E\u6027\u4E2D\uFF0C\u6BD4\u5982\u5B58\u50A8\u5230 setupState\u3001ctx\u3001data\u3001props \u4E2D\u3002\u6211\u4EEC\u5728\u6267\u884C\u7EC4\u4EF6\u6E32\u67D3\u51FD\u6570\u7684\u65F6\u5019\uFF0C\u4E3A\u4E86\u65B9\u4FBF\u7528\u6237\u4F7F\u7528\uFF0C\u4F1A\u76F4\u63A5\u8BBF\u95EE\u6E32\u67D3\u4E0A\u4E0B\u6587 instance.ctx \u4E2D\u7684\u5C5E\u6027\uFF0C\u6240\u4EE5\u6211\u4EEC\u4E5F\u8981\u505A\u4E00\u5C42 proxy\uFF0C\u5BF9\u6E32\u67D3\u4E0A\u4E0B\u6587 instance.ctx \u5C5E\u6027\u7684\u8BBF\u95EE\u548C\u4FEE\u6539\uFF0C\u4EE3\u7406\u5230\u5BF9 setupState\u3001ctx\u3001data\u3001props \u4E2D\u7684\u6570\u636E\u7684\u8BBF\u95EE\u548C\u4FEE\u6539\u3002</p><ul><li>setupState \u5C31\u662F setup \u51FD\u6570\u8FD4\u56DE\u7684\u6570\u636E\uFF0C\u7A0D\u540E\u6211\u4EEC\u4F1A\u8BE6\u7EC6\u8BF4\uFF1B</li><li>ctx \u5305\u62EC\u4E86\u8BA1\u7B97\u5C5E\u6027\u3001\u7EC4\u4EF6\u65B9\u6CD5\u548C\u7528\u6237\u81EA\u5B9A\u4E49\u7684\u4E00\u4E9B\u6570\u636E\uFF1B</li></ul><h2 id="setup-\u8FD4\u56DE\u503C" tabindex="-1"><a class="header-anchor" href="#setup-\u8FD4\u56DE\u503C" aria-hidden="true">#</a> setup \u8FD4\u56DE\u503C</h2><p>setup \u4E0D\u4EC5\u4EC5\u652F\u6301\u8FD4\u56DE\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4E5F\u53EF\u4EE5\u8FD4\u56DE\u4E00\u4E2A\u51FD\u6570\u4F5C\u4E3A\u7EC4\u4EF6\u7684\u6E32\u67D3\u51FD\u6570\u3002</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  props<span class="token operator">:</span> <span class="token punctuation">{</span>\n    msg<span class="token operator">:</span> String<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">function</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;toggle&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onClick<span class="token operator">:</span> onClick <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;Toggle&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre></div><h2 id="vue3-\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528-setup" tabindex="-1"><a class="header-anchor" href="#vue3-\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528-setup" aria-hidden="true">#</a> vue3 \u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528 setup</h2>', 16);
const _hoisted_17 = {
  href: "https://zhuanlan.zhihu.com/p/68477600",
  target: "_blank",
  rel: "noopener noreferrer"
};
const _hoisted_18 = /* @__PURE__ */ createTextVNode("Vue Function-based API RFC");
const _hoisted_19 = /* @__PURE__ */ createBaseVNode("h2", {
  id: "\u8BBE\u8BA1\u52A8\u673A",
  tabindex: "-1"
}, [
  /* @__PURE__ */ createBaseVNode("a", {
    class: "header-anchor",
    href: "#\u8BBE\u8BA1\u52A8\u673A",
    "aria-hidden": "true"
  }, "#"),
  /* @__PURE__ */ createTextVNode(" \u8BBE\u8BA1\u52A8\u673A")
], -1);
const _hoisted_20 = /* @__PURE__ */ createBaseVNode("h3", {
  id: "\u903B\u8F91\u7EC4\u5408\u4E0E\u590D\u7528",
  tabindex: "-1"
}, [
  /* @__PURE__ */ createBaseVNode("a", {
    class: "header-anchor",
    href: "#\u903B\u8F91\u7EC4\u5408\u4E0E\u590D\u7528",
    "aria-hidden": "true"
  }, "#"),
  /* @__PURE__ */ createTextVNode(" \u903B\u8F91\u7EC4\u5408\u4E0E\u590D\u7528")
], -1);
const _hoisted_21 = /* @__PURE__ */ createBaseVNode("p", null, [
  /* @__PURE__ */ createBaseVNode("strong", null, "\u7EC4\u4EF6 API \u8BBE\u8BA1\u6240\u9762\u5BF9\u7684\u6838\u5FC3\u95EE\u9898\u4E4B\u4E00\u5C31\u662F\u5982\u4F55\u7EC4\u7EC7\u903B\u8F91\uFF0C\u4EE5\u53CA\u5982\u4F55\u5728\u591A\u4E2A\u7EC4\u4EF6\u4E4B\u95F4\u62BD\u53D6\u548C\u590D\u7528\u903B\u8F91")
], -1);
function _sfc_render(_ctx, _cache) {
  const _component_OutboundLink = resolveComponent("OutboundLink");
  return openBlock(), createElementBlock(Fragment, null, [
    _hoisted_1,
    createBaseVNode("ul", null, [
      createBaseVNode("li", null, [
        createBaseVNode("a", _hoisted_17, [
          _hoisted_18,
          createVNode(_component_OutboundLink)
        ])
      ])
    ]),
    _hoisted_19,
    _hoisted_20,
    _hoisted_21
  ], 64);
}
var setup_html = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export { setup_html as default };
